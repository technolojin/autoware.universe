name: Catalog.architecture

depends:
  # segmentation
  - VoxelBasedCompareMapFilter.module
  - ScanGroundFilter.module
  # camera-lidar fusion
  - PointPaintingFusion.module
  - RoiDetectedObjectFusion.module

  # filter
  - ObjectLaneletFilter.module
  # merger
  - DecorativeTrackerMerger.module
  - ObjectAssociationMerger.module

  # tracker
  - DetectionByTracker.module
  - MultiObjectTracker.module

  # pipeline
  - CameraLidarFusion.pipeline
  - LidarClustering.pipeline
  - LidarCenterpoint.pipeline
  - ObjectDetection.pipeline

components:
  - component: voxel_based_compare_map_filter
    element: VoxelBasedCompareMapFilter.module
    namespace: perception
    compute_unit: main_ecu
  - component: scan_ground_filter
    element: ScanGroundFilter.module
    namespace: perception
    compute_unit: main_ecu

  - component: pointpainting_fusion
    element: PointPaintingFusion.module
    namespace: perception
    compute_unit: main_ecu

  - component: roi_pointcloud_fusion
    element: RoiPointCloudFusion.module
    namespace: perception
    compute_unit: main_ecu

  - component: decorative_tracker_merger
    element: DecorativeTrackerMerger.module
    namespace: perception
    compute_unit: main_ecu

  - component: multi_object_tracker
    element: MultiObjectTracker.module
    namespace: perception
    compute_unit: main_ecu

  # pipeline
  # - component: camera_lidar_fusion
  #   element: CameraLidarFusion.pipeline
  #   namespace: perception
  #   compute_unit: main_ecu
  # - component: clustering
  #   element: LidarClustering.pipeline
  #   namespace: perception
  #   compute_unit: main_ecu
  # - component: centerpoint
  #   element: LidarCenterpoint.pipeline
  #   namespace: perception
  #   compute_unit: main_ecu
  - component: object_detection
    element: ObjectDetection.pipeline
    namespace: perception
    compute_unit: main_ecu

connections:
  - from: pointpainting_fusion.output.objects
    to: multi_object_tracker.input.lidar_pointpainting
